(function(e){function t(t){for(var c,a,u=t[0],i=t[1],l=t[2],b=0,f=[];b<u.length;b++)a=u[b],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);s&&s(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],c=!0,u=1;u<n.length;u++){var i=n[u];0!==o[i]&&(c=!1)}c&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var c={},o={app:0},r=[];function a(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=c,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(n,c,function(t){return e[t]}.bind(null,c));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var s=i;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"13bf":function(e,t,n){"use strict";n("2776")},2776:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23");function o(e,t,n,o,r,a){var u=Object(c["j"])("main-block"),i=Object(c["j"])("comments");return Object(c["g"])(),Object(c["c"])(c["a"],null,[Object(c["f"])(u),Object(c["f"])(i)],64)}var r={class:"container column"};function a(e,t,n,o,a,u){var i=Object(c["j"])("form-block"),l=Object(c["j"])("content-block");return Object(c["g"])(),Object(c["c"])("div",r,[Object(c["f"])(i,{onOnAddRow:u.onAddRow},null,8,["onOnAddRow"]),Object(c["f"])(l,{content:a.content,onOnRemoveRow:u.onRemoveRow},null,8,["content","onOnRemoveRow"])])}n("4de4"),n("d81d"),n("b0c0"),n("b64b"),n("d3b7");var u=n("5530"),i=(n("96cf"),n("1da1")),l={class:"form-control"},s=Object(c["f"])("label",{for:"type"},"Тип блока",-1),b={class:"form-control"},f=Object(c["f"])("label",{for:"value"},"Значение",-1);function d(e,t,n,o,r,a){return Object(c["g"])(),Object(c["c"])("form",{class:"card card-w30",onSubmit:t[3]||(t[3]=Object(c["q"])((function(){return a.onSubmit&&a.onSubmit.apply(a,arguments)}),["prevent"]))},[Object(c["f"])("div",l,[s,Object(c["p"])(Object(c["f"])("select",{id:"type","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.form.blockType=e})},[(Object(c["g"])(!0),Object(c["c"])(c["a"],null,Object(c["h"])(r.blockTypes,(function(e){var t=e.value,n=e.text;return Object(c["g"])(),Object(c["c"])("option",{value:t,key:t},Object(c["l"])(n),9,["value"])})),128))],512),[[c["m"],r.form.blockType]])]),Object(c["f"])("div",b,[f,Object(c["p"])(Object(c["f"])("textarea",{id:"value","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.form.value=e}),rows:"3"},null,512),[[c["n"],r.form.value,void 0,{trim:!0}]])]),Object(c["f"])("button",{class:"btn primary",disabled:a.isBtnDisabled},"Добавить",8,["disabled"])],32)}var p={emits:{onAddRow:{form:Object}},data:function(){return{blockTypes:[{value:"title",text:"Заголовок"},{value:"subtitle",text:"Подзаголовок"},{value:"avatar",text:"Аватар"},{value:"text",text:"Текст"}],form:{blockType:"title",value:""}}},computed:{isBtnDisabled:function(){return this.form.value.length<4}},methods:{onSubmit:function(){this.isBtnDisabled||(this.$emit("onAddRow",this.form),this.form.blockType="title",this.form.value="")}}};p.render=d;var j=p,O={class:"card card-w70"},m={key:0};function v(e,t,n,o,r,a){return Object(c["g"])(),Object(c["c"])("div",O,[n.content.length?Object(c["d"])("",!0):(Object(c["g"])(),Object(c["c"])("h3",m,"Добавьте первый блок, чтобы увидеть результат")),(Object(c["g"])(!0),Object(c["c"])(c["a"],null,Object(c["h"])(n.content,(function(t){var n=t.blockType,o=t.value,r=t.id;return Object(c["g"])(),Object(c["c"])(Object(c["k"])("content-type-".concat(n)),{key:r,value:o},{default:Object(c["o"])((function(){return[Object(c["f"])("button",{class:"btn danger small",onClick:function(t){return e.$emit("onRemoveRow",r)}},"Remove",8,["onClick"])]})),_:2},1032,["value"])})),128))])}function h(e,t,n,o,r,a){return Object(c["g"])(),Object(c["c"])("p",null,[Object(c["i"])(e.$slots,"default"),Object(c["e"])(Object(c["l"])(n.value),1)])}var y={props:{value:{type:String,required:!0}}};y.render=h;var g=y;function k(e,t,n,o,r,a){return Object(c["g"])(),Object(c["c"])("h1",null,[Object(c["i"])(e.$slots,"default"),Object(c["e"])(Object(c["l"])(n.value),1)])}var w={props:{value:{type:String,required:!0}}};w.render=k;var R=w,T={class:"avatar"};function x(e,t,n,o,r,a){return Object(c["g"])(),Object(c["c"])(c["a"],null,[Object(c["i"])(e.$slots,"default"),Object(c["f"])("div",T,[Object(c["f"])("img",{src:n.value,alt:"Avatar"},null,8,["src"])])],64)}n("3ca3"),n("ddb0"),n("2b3d");var S={props:{value:{type:String,required:!0,validator:function(e){try{return!!new URL(e)}catch(t){return!1}}}}};n("13bf");S.render=x;var C=S;function A(e,t,n,o,r,a){return Object(c["g"])(),Object(c["c"])("h2",null,[Object(c["i"])(e.$slots,"default"),Object(c["e"])(Object(c["l"])(n.value),1)])}var L={props:{value:{type:String,required:!0}}};L.render=A;var P=L,_={emits:["onRemoveRow"],props:{content:{type:Array,required:!0}},components:{ContentTypeTitle:R,ContentTypeSubtitle:P,ContentTypeAvatar:C,ContentTypeText:g}};n("6f21");_.render=v;var q=_,B={data:function(){return{content:[]}},mounted:function(){var e=this;fetch("https://vue-course-9bd3f-default-rtdb.firebaseio.com/blocks.json",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:c=t.sent,c&&(e.content=Object.keys(c).map((function(e){return{id:e,blockType:c[e].blockType,value:c[e].value}})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e.message)}))},methods:{onAddRow:function(e){var t=this,n=JSON.stringify(e);fetch("https://vue-course-9bd3f-default-rtdb.firebaseio.com/blocks.json",{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(c){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.json();case 2:o=e.sent,r=o.name,t.content.push(Object(u["a"])({id:r},JSON.parse(n)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e.message)}))},onRemoveRow:function(e){var t=this;fetch("https://vue-course-9bd3f-default-rtdb.firebaseio.com/blocks/".concat(e,".json"),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(){t.content=t.content.filter((function(t){return t.id!==e}))})).catch((function(e){console.log(e.message)}))}},components:{FormBlock:j,ContentBlock:q}};B.render=a;var $=B,E={class:"container"},M={key:0},D={key:1,class:"card"},J={class:"list"},U={key:2,class:"loader"};function G(e,t,n,o,r,a){return Object(c["g"])(),Object(c["c"])("div",E,[r.comments.length?Object(c["d"])("",!0):(Object(c["g"])(),Object(c["c"])("p",M,[Object(c["f"])("button",{class:"btn primary",onClick:t[1]||(t[1]=function(){return a.onLoadComments&&a.onLoadComments.apply(a,arguments)})},"Загрузить комментарии")])),r.comments.length?(Object(c["g"])(),Object(c["c"])("div",D,[Object(c["f"])("h2",null,"Комментарии ("+Object(c["l"])(r.comments.length)+")",1),Object(c["f"])("ul",J,[(Object(c["g"])(!0),Object(c["c"])(c["a"],null,Object(c["h"])(r.comments,(function(e){var t=e.email,n=e.body,o=e.id;return Object(c["g"])(),Object(c["c"])("li",{class:"list-item",key:o},[Object(c["f"])("div",null,[Object(c["f"])("p",null,[Object(c["f"])("strong",null,Object(c["l"])(t),1)]),Object(c["f"])("small",null,Object(c["l"])(n),1)])])})),128))])])):r.isLoading?(Object(c["g"])(),Object(c["c"])("div",U)):Object(c["d"])("",!0)])}var N={data:function(){return{isLoading:!1,comments:[]}},methods:{onLoadComments:function(){var e=this;this.isLoading=!0,fetch("https://jsonplaceholder.typicode.com/comments?_limit=15",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:e.comments=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e.message)})).finally((function(){e.isLoading=!1}))}}};N.render=G;var V=N,F={components:{MainBlock:$,Comments:V}};F.render=o;var z=F;n("d8ac");Object(c["b"])(z).mount("#app")},"6f21":function(e,t,n){"use strict";n("ed85")},d8ac:function(e,t,n){},ed85:function(e,t,n){}});
//# sourceMappingURL=app.a67d1552.js.map